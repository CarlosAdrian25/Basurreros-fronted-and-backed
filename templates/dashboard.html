<!-- templates/dashboard.html -->
{% extends "base.html" %}

{% block title %}Panel Principal{% endblock %}

{% block header %}
Panel Principal
{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Fecha y Hora -->
    <div class="text-center mb-4">
        <!-- Hora actual dinámica -->
        <h1 id="hora-actual" class="h1"></h1>
        <!-- Fecha actual estática -->
        <p class="h5 text-secondary">{{ fecha_actual }}</p>
    </div>

    <!-- Tabla de Personal Trabajando -->
    <div class="row">
        <div class="col-md-9">
            <div class="card">
                <div class="card-header" style="background-color: #006BA6; color: white;">
                    <strong>Personal Trabajando:</strong>
                </div>
                <div class="card-body p-0">
                    <table class="table table-bordered text-center m-0">
                        <thead class="bg-light">
                            <tr>
                                <th>Nombre del Personal</th>
                                <th>Vehículo</th>
                                <th>Ruta</th>
                                <th>Hora</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for trabajador in trabajadores %}
                            <tr>
                                <td>{{ trabajador.nombre }}</td>
                                <td>{{ trabajador.vehiculo }}</td>
                                <td><a href="#" class="ruta">Ver Ruta</a></td>
                                <td>{{ trabajador.hora }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Estadísticas -->
        <div class="col-md-3">
            <div class="card text-center shadow mb-4">
                <div class="card-body">
                    <h5 class="titulo card-title">Número de Reportes por Personal</h5>
                    <p class="display-4 text-dark">0</p>
                </div>
            </div>
            <div class="card text-center shadow">
                <div class="card-body">
                    <h5 class="titulo card-title">Total de Personal</h5>
                    <p class="display-4 text-dark">40</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Script para actualizar la hora -->
<script>
    // Función para actualizar la hora en tiempo real
    function actualizarHora() {
        const ahora = new Date();
        const horas = String(ahora.getHours()).padStart(2, '0');
        const minutos = String(ahora.getMinutes()).padStart(2, '0');
        const segundos = String(ahora.getSeconds()).padStart(2, '0');
        const horaActual = `${horas}:${minutos}:${segundos}`;

        // Actualizar el elemento de hora en el DOM
        document.getElementById("hora-actual").innerText = horaActual;
    }

    // Iniciar la actualización de la hora cada segundo
    setInterval(actualizarHora, 1000);

    // Llamar la función una vez al cargar la página
    actualizarHora();
</script>
{% endblock %}
